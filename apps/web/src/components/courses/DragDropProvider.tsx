'use client';\n\nimport { createContext, useContext, useState } from 'react';\n\ninterface DragDropContextType {\n  draggedItem: any;\n  setDraggedItem: (item: any) => void;\n  dropTarget: any;\n  setDropTarget: (target: any) => void;\n}\n\nconst DragDropContext = createContext<DragDropContextType | null>(null);\n\nexport function DragDropProvider({ children }: { children: React.ReactNode }) {\n  const [draggedItem, setDraggedItem] = useState(null);\n  const [dropTarget, setDropTarget] = useState(null);\n\n  return (\n    <DragDropContext.Provider value={{\n      draggedItem,\n      setDraggedItem,\n      dropTarget,\n      setDropTarget\n    }}>\n      {children}\n    </DragDropContext.Provider>\n  );\n}\n\nexport function useDragDrop() {\n  const context = useContext(DragDropContext);\n  if (!context) {\n    throw new Error('useDragDrop must be used within DragDropProvider');\n  }\n  return context;\n}\n\nexport function DraggableItem({ \n  item, \n  type, \n  onReorder, \n  children \n}: { \n  item: any; \n  type: 'module' | 'lesson'; \n  onReorder: (draggedId: string, targetId: string) => void;\n  children: React.ReactNode;\n}) {\n  const { draggedItem, setDraggedItem, setDropTarget } = useDragDrop();\n\n  const handleDragStart = (e: React.DragEvent) => {\n    setDraggedItem({ ...item, type });\n    e.dataTransfer.effectAllowed = 'move';\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    if (draggedItem && draggedItem.id !== item.id && draggedItem.type === type) {\n      onReorder(draggedItem.id, item.id);\n    }\n    setDraggedItem(null);\n    setDropTarget(null);\n  };\n\n  const handleDragEnter = () => {\n    if (draggedItem && draggedItem.type === type) {\n      setDropTarget(item.id);\n    }\n  };\n\n  return (\n    <div\n      draggable\n      onDragStart={handleDragStart}\n      onDragOver={handleDragOver}\n      onDrop={handleDrop}\n      onDragEnter={handleDragEnter}\n      className={`transition-all duration-200 ${\n        draggedItem?.id === item.id ? 'opacity-50 scale-95' : ''\n      }`}\n    >\n      {children}\n    </div>\n  );\n}